# BeyondLink - Beyond æ¿€å…‰å®æ—¶å¯è§†åŒ–å·¥å…·

ä¸€ä¸ªç”¨äºæ¥æ”¶å’Œå¯è§†åŒ– Pangolin Beyond æ¿€å…‰æ•°æ®çš„ DirectX 11 åº”ç”¨ç¨‹åºã€‚

[![Version](https://img.shields.io/badge/Version-v1.5.0-green.svg)](https://github.com/AspectEngine/BeyondLink/releases)
[![Language: C++17](https://img.shields.io/badge/Language-C%2B%2B17-blue.svg)](https://isocpp.org/)
[![Platform: Windows](https://img.shields.io/badge/Platform-Windows-lightgrey.svg)](https://www.microsoft.com/windows)

---

## ç›®å½•

- [é¡¹ç›®ç®€ä»‹](#é¡¹ç›®ç®€ä»‹)
- [ä¸»è¦åŠŸèƒ½](#ä¸»è¦åŠŸèƒ½)
- [ç³»ç»Ÿè¦æ±‚](#ç³»ç»Ÿè¦æ±‚)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
- [ä½¿ç”¨è¯´æ˜](#ä½¿ç”¨è¯´æ˜)
- [Beyond é…ç½®](#beyond-é…ç½®)
- [ç³»ç»Ÿæ¶æ„](#ç³»ç»Ÿæ¶æ„)
- [é…ç½®é€‰é¡¹](#é…ç½®é€‰é¡¹)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
- [æŠ€æœ¯å®ç°](#æŠ€æœ¯å®ç°)

---

## é¡¹ç›®ç®€ä»‹

BeyondLink æ˜¯ä¸º Pangolin Beyond æ¿€å…‰æ§åˆ¶è½¯ä»¶å¼€å‘çš„å®æ—¶å¯è§†åŒ–å·¥å…·ã€‚é€šè¿‡ UDP å¤šæ’­æ¥æ”¶ Beyond è¾“å‡ºçš„æ¿€å…‰æ•°æ®ï¼Œå¹¶ä½¿ç”¨ DirectX 11 æ¸²æŸ“æ˜¾ç¤ºã€‚

ä¸»è¦ç‰¹ç‚¹ï¼š
- æ”¯æŒ 9 å°æ¿€å…‰è®¾å¤‡åŒæ—¶å¯è§†åŒ–ï¼ˆè®¾å¤‡ 1-9ï¼‰
- ä½å»¶è¿Ÿã€é«˜å¸§ç‡æ¸²æŸ“
- æ¨¡æ‹ŸçœŸå®æ¿€å…‰æ‰«æä»ªç‰©ç†ç‰¹æ€§
- å®æ—¶åˆ‡æ¢ä¸åŒè®¾å¤‡é¢„è§ˆ

---

## ä¸»è¦åŠŸèƒ½

### æ¸²æŸ“

- DirectX 11 ç¡¬ä»¶åŠ é€Ÿçš„ç‚¹äº‘æ¸²æŸ“
- HDR çº¹ç†æ”¯æŒï¼ˆR16G16B16A16_FLOAT æ ¼å¼ï¼‰
- åŠ æ³•æ··åˆæ¨¡å¼æ¨¡æ‹Ÿæ¿€å…‰å åŠ æ•ˆæœ
- æ”¯æŒ Mipmap ç”Ÿæˆ
- 5å€äº®åº¦åå¤„ç†å¢å¼º

### ç½‘ç»œ

- UDP å¤šæ’­æ¥æ”¶ï¼ˆè‡ªåŠ¨åŠ å…¥ 279 ä¸ªå¤šæ’­ç»„ï¼‰
- ä½¿ç”¨ IP_PKTINFO è¯†åˆ«æ•°æ®åŒ…ç›®æ ‡åœ°å€
- ä»å¤šæ’­åœ°å€è‡ªåŠ¨æå–è®¾å¤‡ IDï¼ˆ239.255.X.Y æ ¼å¼ï¼‰
- é›†æˆ linetD2_x64.dll è§£æ Pangolin åè®®
- ç‹¬ç«‹çš„ç½‘ç»œæ¥æ”¶çº¿ç¨‹

### æ‰«æä»ªæ¨¡æ‹Ÿ

- é€Ÿåº¦å¹³æ»‘ï¼ˆæ¨¡æ‹Ÿæ‰«æä»ªæƒ¯æ€§ï¼‰
- æ ¹æ®æ‰«æé€Ÿåº¦åŠ¨æ€è°ƒæ•´äº®åº¦
- è‡ªåŠ¨ç‚¹æ’å€¼æå‡æ¸²æŸ“è´¨é‡
- è¯†åˆ«å¹¶å¢å¼ºé™æ­¢å…‰æŸ
- 4æ¡£è´¨é‡çº§åˆ«ï¼ˆLow/Medium/High/Ultraï¼‰

### äº¤äº’

- æŒ‰ 1-9 é”®å®æ—¶åˆ‡æ¢è®¾å¤‡
- æ¯ 5 ç§’è¾“å‡ºçŠ¶æ€æŠ¥å‘Š
- çª—å£æ ‡é¢˜æ˜¾ç¤º FPS
- è¯¦ç»†çš„é”™è¯¯æç¤º

---

## ç³»ç»Ÿè¦æ±‚

**æœ€ä½é…ç½®ï¼š**
- Windows 10/11 (64-bit)
- åŒæ ¸ CPUï¼ˆæ”¯æŒ SSE2ï¼‰
- æ”¯æŒ DirectX 11 Feature Level 11.0 çš„æ˜¾å¡
- 2 GB å†…å­˜
- åƒå…†ç½‘å¡ï¼ˆæ¨èï¼‰

**æ¨èé…ç½®ï¼š**
- Windows 10/11 (64-bit)
- å››æ ¸æˆ–æ›´é«˜ CPU
- ç‹¬ç«‹æ˜¾å¡ï¼ˆNVIDIA/AMDï¼Œæ”¯æŒ DX11.1ï¼‰
- 4 GB ä»¥ä¸Šå†…å­˜
- åƒå…†ç½‘å¡

**å¼€å‘ç¯å¢ƒï¼š**
- Visual Studio 2022
- CMake 3.15+
- Windows SDK 10.0+
- C++17

---

## å¿«é€Ÿå¼€å§‹

### 1. è·å–ä»£ç 

```bash
git clone https://github.com/AspectEngine/BeyondLink.git
cd BeyondLink
```

### 2. å‡†å¤‡ä¾èµ–

ç¡®ä¿ `bin/` ç›®å½•ä¸‹æœ‰è¿™ä¸¤ä¸ª DLL æ–‡ä»¶ï¼ˆæ¥è‡ª Beyond SDKï¼‰ï¼š

```
BeyondLink/
â”œâ”€â”€ bin/
â”‚   â”œâ”€â”€ linetD2_x64.dll
â”‚   â””â”€â”€ matrix64.dll
```

### 3. ç¼–è¯‘

**ä½¿ç”¨ Visual Studio 2022ï¼š**

1. æ‰“å¼€ Visual Studio 2022
2. æ–‡ä»¶ â†’ æ‰“å¼€ â†’ æ–‡ä»¶å¤¹ï¼Œé€‰æ‹© BeyondLink ç›®å½•
3. VS ä¼šè‡ªåŠ¨æ£€æµ‹ CMakeLists.txt å¹¶é…ç½®é¡¹ç›®
4. å·¥å…·æ é€‰æ‹© Debug x64 æˆ– Release x64
5. æŒ‰ Ctrl+Shift+B ç¼–è¯‘
6. æŒ‰ F5 è¿è¡Œ

**ä½¿ç”¨å‘½ä»¤è¡Œï¼š**

```bash
# é…ç½®
cmake -B Build/CMake/Debug -G "Visual Studio 17 2022" -A x64

# ç¼–è¯‘
cmake --build Build/CMake/Debug --config Debug

# è¿è¡Œ
Build\Binaries\Debug\BeyondLink.exe
```

### 4. è¾“å‡ºä½ç½®

- Debug ç‰ˆæœ¬ï¼š`Build\Binaries\Debug\BeyondLink.exe`
- Release ç‰ˆæœ¬ï¼š`Build\Binaries\Release\BeyondLink.exe`

CMake ä¼šè‡ªåŠ¨å¤åˆ¶ DLL åˆ°è¾“å‡ºç›®å½•ã€‚

### 5. é…ç½® Beyond å¹¶æµ‹è¯•

åœ¨ Beyond ä¸­ï¼š
1. View èœå• â†’ å‹¾é€‰ "Enable visualization through via external software"
2. æ‰“å¼€æŠ•å½±åŒºåŸŸè®¾ç½® â†’ External visualization â†’ è®¾ç½® Fixture number = 1
3. æ’­æ”¾å†…å®¹

åœ¨ BeyondLink ä¸­æŒ‰ 0 é”®æŸ¥çœ‹è®¾å¤‡ 0ï¼Œåº”è¯¥èƒ½çœ‹åˆ°å¯è§†åŒ–æ•ˆæœã€‚

---

## é¡¹ç›®ç»“æ„

```
BeyondLink/
â”œâ”€â”€ include/                    # å¤´æ–‡ä»¶
â”‚   â”œâ”€â”€ BeyondLink.h           # ä¸»ç³»ç»Ÿæ¥å£
â”‚   â”œâ”€â”€ LaserPoint.h           # æ¿€å…‰ç‚¹æ•°æ®ç»“æ„ï¼ˆ28å­—èŠ‚ï¼‰
â”‚   â”œâ”€â”€ LaserProtocol.h        # ç½‘ç»œåè®®å¤„ç†
â”‚   â”œâ”€â”€ LaserRenderer.h        # DirectX 11 æ¸²æŸ“å™¨
â”‚   â”œâ”€â”€ LaserSettings.h        # é…ç½®å‚æ•°
â”‚   â”œâ”€â”€ LaserSource.h          # æ¿€å…‰æºæ•°æ®å¤„ç†
â”‚   â””â”€â”€ LaserWindow.h          # æ˜¾ç¤ºçª—å£
â”‚
â”œâ”€â”€ Source/                     # æºæ–‡ä»¶
â”‚   â”œâ”€â”€ BeyondLink.cpp         # ä¸»ç³»ç»Ÿå®ç°
â”‚   â”œâ”€â”€ LaserProtocol.cpp      # ç½‘ç»œæ¥æ”¶å’Œè§£æï¼ˆWSARecvMsgï¼‰
â”‚   â”œâ”€â”€ LaserRenderer.cpp      # æ¸²æŸ“ç®¡çº¿ï¼ˆD3D11ï¼‰
â”‚   â”œâ”€â”€ LaserSource.cpp        # æ‰«æä»ªæ¨¡æ‹Ÿç®—æ³•
â”‚   â”œâ”€â”€ LaserWindow.cpp        # çª—å£ç®¡ç†
â”‚   â””â”€â”€ Main.cpp               # ç¨‹åºå…¥å£
â”‚
â”œâ”€â”€ bin/                        # ä¾èµ– DLL
â”‚   â”œâ”€â”€ linetD2_x64.dll
â”‚   â””â”€â”€ matrix64.dll
â”‚
â”œâ”€â”€ Build/                      # æ„å»ºè¾“å‡º
â”‚   â”œâ”€â”€ Binaries/              # å¯æ‰§è¡Œæ–‡ä»¶
â”‚   â”œâ”€â”€ Intermediate/          # ä¸­é—´æ–‡ä»¶
â”‚   â””â”€â”€ CMake/                 # CMake ç”Ÿæˆæ–‡ä»¶
â”‚
â”œâ”€â”€ CMakeLists.txt             # CMake é…ç½®
â”œâ”€â”€ CMakePresets.json          # CMake é¢„è®¾
â”œâ”€â”€ .gitignore
â””â”€â”€ README.md
```

ä»£ç æ³¨é‡Šæ¯”è¾ƒè¯¦ç»†ï¼ˆ1200+ è¡Œä¸­æ–‡æ³¨é‡Šï¼‰ï¼Œé€‚åˆå­¦ä¹  DirectX 11 å’Œç½‘ç»œç¼–ç¨‹ã€‚

---

## ä½¿ç”¨è¯´æ˜

### å¯åŠ¨åä¼šå‘ç”Ÿä»€ä¹ˆ

ç¨‹åºä¼šï¼š
1. åˆå§‹åŒ– DirectX 11 è®¾å¤‡
2. åŠ è½½ linetD2_x64.dll
3. åˆ›å»º 9 ä¸ªæ¿€å…‰æºï¼ˆå¯¹åº”è®¾å¤‡ 1-9ï¼‰
4. ç»‘å®š UDP ç«¯å£ 5568
5. åŠ å…¥ 279 ä¸ªå¤šæ’­ç»„
6. æ‰“å¼€ 512x512 é¢„è§ˆçª—å£

### é”®ç›˜æ§åˆ¶

- **1-9**ï¼šåˆ‡æ¢åˆ°å¯¹åº”è®¾å¤‡ï¼ˆè®¾å¤‡ 1 = Fixture 1 = 239.255.0.xï¼Œä»¥æ­¤ç±»æ¨ï¼‰
- **ESC**ï¼šé€€å‡º

### çŠ¶æ€æŠ¥å‘Š

æ¯ 5 ç§’è¾“å‡ºä¸€æ¬¡ï¼š

```
=== Status Report ===
Network: 5234 packets | 7680152 bytes | FPS: 59

All Devices Status:
>>> Device 1 (239.255.0.x): [OK] 2220 points <- VIEWING
    Device 2 (239.255.1.x): [OK] 1856 points
    Device 3 (239.255.2.x): [--] 0 points
    Device 4 (239.255.3.x): [--] 0 points
    Device 5 (239.255.4.x): [--] 0 points
    Device 6 (239.255.5.x): [--] 0 points
    Device 7 (239.255.6.x): [--] 0 points
    Device 8 (239.255.7.x): [--] 0 points
    Device 9 (239.255.8.x): [--] 0 points
===================
```

- [OK]ï¼šæœ‰æ•°æ®
- [--]ï¼šæ— æ•°æ®
- `<- VIEWING`ï¼šå½“å‰æ­£åœ¨æŸ¥çœ‹

---

## Beyond é…ç½®

### é‡è¦ï¼šFixture Number æ˜ å°„å…³ç³»

Beyond çš„ Fixture number ä¸ BeyondLink è®¾å¤‡ç¼–å·å®Œå…¨ä¸€è‡´ï¼š

| Beyond Fixture | å¤šæ’­åœ°å€ | BeyondLink è®¾å¤‡ | æŒ‰é”® |
|---------------|---------|----------------|-----|
| 1 | 239.255.0.x | è®¾å¤‡ 1 | 1 |
| 2 | 239.255.1.x | è®¾å¤‡ 2 | 2 |
| 3 | 239.255.2.x | è®¾å¤‡ 3 | 3 |
| 4 | 239.255.3.x | è®¾å¤‡ 4 | 4 |
| 5 | 239.255.4.x | è®¾å¤‡ 5 | 5 |
| 6 | 239.255.5.x | è®¾å¤‡ 6 | 6 |
| 7 | 239.255.6.x | è®¾å¤‡ 7 | 7 |
| 8 | 239.255.7.x | è®¾å¤‡ 8 | 8 |
| 9 | 239.255.8.x | è®¾å¤‡ 9 | 9 |

### é…ç½®æ­¥éª¤

**1. å¯ç”¨å¤–éƒ¨å¯è§†åŒ–**

åœ¨ Beyond çš„ View èœå•ä¸­å‹¾é€‰ï¼š
```
Enable visualization through via external software
```

**2. è®¾ç½® Fixture Number**

æ‰“å¼€æŠ•å½±åŒºåŸŸï¼ˆProjection Zoneï¼‰è®¾ç½®ï¼Œæ‰¾åˆ° External visualization éƒ¨åˆ†ï¼Œè®¾ç½® Fixture numberã€‚

ä¾‹å¦‚ï¼š
- æŠ•å½±åŒºåŸŸ 1 â†’ Fixture number = 1ï¼ˆå¯¹åº”è®¾å¤‡ 1ï¼‰
- æŠ•å½±åŒºåŸŸ 2 â†’ Fixture number = 2ï¼ˆå¯¹åº”è®¾å¤‡ 2ï¼‰
- ä»¥æ­¤ç±»æ¨

**3. æ’­æ”¾å†…å®¹**

Beyond åªåœ¨æ’­æ”¾æ—¶å‘é€æ•°æ®ï¼Œç¡®ä¿æœ‰ Cue æˆ– Timeline åœ¨è¿è¡Œã€‚

**4. åˆ‡æ¢è®¾å¤‡**

åœ¨ BeyondLink ä¸­æŒ‰ 1-9 é”®åˆ‡æ¢åˆ°å¯¹åº”è®¾å¤‡æŸ¥çœ‹ã€‚

### å·¥ä½œåŸç†

- Beyond æ ¹æ® Fixture number å†³å®šå‘é€åˆ°å“ªä¸ªå¤šæ’­åœ°å€
- BeyondLink ä½¿ç”¨ IP_PKTINFO æ£€æµ‹æ•°æ®åŒ…çš„ç›®æ ‡åœ°å€
- ä»ç›®æ ‡åœ°å€ç¬¬ä¸‰å­—èŠ‚æå–å†…éƒ¨ç´¢å¼•ï¼ˆFixture number - 1ï¼‰ï¼Œæ˜¾ç¤ºæ—¶è½¬æ¢ä¸ºè®¾å¤‡ç¼–å·ï¼ˆFixture numberï¼‰

### å¿«é€Ÿæµ‹è¯•

1. Beyond è®¾ç½® Fixture number = 1
2. å¯ç”¨å¤–éƒ¨å¯è§†åŒ–
3. å¯åŠ¨ BeyondLinkï¼ŒæŒ‰ 1 é”®
4. æ’­æ”¾å†…å®¹ï¼Œåº”è¯¥èƒ½çœ‹åˆ°æ•ˆæœ

---

## ç³»ç»Ÿæ¶æ„

### æ¨¡å—ç»„æˆ

```
BeyondLinkSystem (ä¸»ç³»ç»Ÿ)
    â”œâ”€â”€ LaserProtocol (ç½‘ç»œæ¥æ”¶)
    â”œâ”€â”€ LaserRenderer (D3D11æ¸²æŸ“)
    â”œâ”€â”€ LaserSourceÃ—9 (æ•°æ®å¤„ç†)
    â””â”€â”€ LaserWindow (çª—å£æ˜¾ç¤º)
```

### æ•°æ®æµç¨‹

```
Beyond è½¯ä»¶
    â†“ UDP å¤šæ’­ (239.255.X.Y:5568)
LaserProtocol::ReceiveThread
    â†“ WSARecvMsg + IP_PKTINFO
æå–ç›®æ ‡åœ°å€ â†’ è®¾å¤‡ ID
    â†“ linetD2_x64.dll
è§£ææ¿€å…‰ç‚¹æ•°æ®
    â†“ å›è°ƒ
LaserSource::SetPointList
    â†“ æ‰«æä»ªæ¨¡æ‹Ÿ
å¤„ç†åçš„ç‚¹æ•°æ®
    â†“ DirectX 11
LaserRenderer::RenderSource
    â†“ æ¸²æŸ“åˆ°çº¹ç†
LaserWindow::DisplayLaserTexture
    â†“ æ˜¾ç¤ºåˆ°å±å¹•
512x512 çª—å£
```

---

## é…ç½®é€‰é¡¹

åœ¨ `Source/Main.cpp` ä¸­å¯ä»¥ä¿®æ”¹ï¼š

```cpp
Core::LaserSettings settings;
settings.MaxLaserDevices = 9;           // è®¾å¤‡æ•°é‡ï¼ˆ1-9ï¼‰
settings.NetworkPort = 5568;            // ç½‘ç»œç«¯å£
settings.TextureSize = 1024;            // æ¸²æŸ“åˆ†è¾¨ç‡ (512/1024/2048/4096)
settings.ScannerSimulation = true;      // æ‰«æä»ªæ¨¡æ‹Ÿ
settings.EnableMipmaps = true;          // Mipmap
settings.SampleCount = 8;               // æ’å€¼é‡‡æ ·æ•°
settings.EdgeFade = 0.1f;               // è¾¹ç¼˜æ·¡åŒ– [0.0-1.0]
settings.VelocitySmoothing = 0.83f;     // é€Ÿåº¦å¹³æ»‘ [0.0-1.0]
settings.LaserQuality = Core::LaserSettings::QualityLevel::High;
```

è´¨é‡çº§åˆ«å¯¹æ¯”ï¼š

| çº§åˆ« | é™é‡‡æ · | è¯´æ˜ |
|------|-------|------|
| Low | 8Ã— | ä½æ€§èƒ½ç¡¬ä»¶ |
| Medium | 4Ã— | ä¸€èˆ¬ç¡¬ä»¶ |
| High | 2Ã— | æ¨è |
| Ultra | 1Ã— | é«˜ç«¯ç¡¬ä»¶ |

---

## å¸¸è§é—®é¢˜

### æ”¶ä¸åˆ°æ•°æ®

**ç—‡çŠ¶ï¼š**
```
[!] WARNING: No network data received!
```

**æ£€æŸ¥ï¼š**
1. Beyond çš„å¤–éƒ¨å¯è§†åŒ–æ˜¯å¦å¯ç”¨ï¼ˆView èœå•ï¼‰
2. Fixture number æ˜¯å¦è®¾ç½®ï¼ˆæŠ•å½±åŒºåŸŸè®¾ç½®ï¼‰
3. Beyond æ˜¯å¦åœ¨æ’­æ”¾å†…å®¹
4. é˜²ç«å¢™æ˜¯å¦å…è®¸ BeyondLink.exeï¼ˆUDP 5568ï¼‰
5. ç”¨ Wireshark è¿‡æ»¤ `udp.port == 5568` ç¡®è®¤æœ‰æ•°æ®åŒ…

### åˆ‡æ¢è®¾å¤‡åé»‘å±

**åŸå› ï¼š** Beyond æ²¡æœ‰å‘è¯¥è®¾å¤‡å‘é€æ•°æ®

**è§£å†³ï¼š** ä¿®æ”¹ Beyond çš„ Fixture number

ä¾‹å¦‚è¦çœ‹è®¾å¤‡ 2ï¼š
- Beyond ä¸­è®¾ç½® Fixture number = 2
- BeyondLink ä¸­æŒ‰ 2 é”®

å¯ä»¥ç”¨ Wireshark è¿‡æ»¤ `ip.dst == 239.255.1.0/24` éªŒè¯ Beyond æ˜¯å¦å‘é€æ•°æ®ï¼ˆæ³¨æ„ï¼šè®¾å¤‡ 2 å¯¹åº”å¤šæ’­åœ°å€ 239.255.1.xï¼‰ã€‚

### DLL åŠ è½½å¤±è´¥

**ç—‡çŠ¶ï¼š**
```
Failed to load linetD2_x64.dll, error: 126
```

**è§£å†³ï¼š**
1. ç¡®è®¤ `bin/linetD2_x64.dll` å’Œ `bin/matrix64.dll` å­˜åœ¨
2. ç¡®è®¤æ˜¯ 64 ä½ DLL
3. å®‰è£… [Visual C++ Redistributable](https://aka.ms/vs/17/release/vc_redist.x64.exe)

### GPU è®¾å¤‡ç§»é™¤

**ç—‡çŠ¶ï¼š**
```
D3D Device has been removed! Reason: 0x887A0006
```

**åŸå› ï¼š** GPU é©±åŠ¨å´©æºƒæˆ–è¶…æ—¶

**è§£å†³ï¼š**
1. æ›´æ–°æ˜¾å¡é©±åŠ¨
2. é™ä½çº¹ç†å¤§å°ï¼ˆTextureSize = 512ï¼‰
3. ç¦ç”¨æ‰«æä»ªæ¨¡æ‹Ÿï¼ˆScannerSimulation = falseï¼‰
4. æ£€æŸ¥ GPU æ¸©åº¦

### é¢œè‰²ä¸å¯¹

**æ£€æŸ¥ï¼š**
1. Beyond è¾“å‡ºçš„æ˜¯ RGB è¿˜æ˜¯å•è‰²
2. Beyond çš„é¢œè‰²æ ¡å‡†
3. å¯ä»¥ä¿®æ”¹ `LaserWindow.cpp` ä¸­çš„äº®åº¦ç³»æ•°ï¼ˆé»˜è®¤ 5.0ï¼‰

---

## æŠ€æœ¯å®ç°

### ç½‘ç»œåè®®

- ä¼ è¾“ï¼šUDP æ— è¿æ¥
- åœ°å€ï¼šIPv4 å¤šæ’­
- ç«¯å£ï¼š5568
- åŒ…å¤§å°ï¼šé€šå¸¸ 1468 å­—èŠ‚
- æ ¼å¼ï¼šPangolin Binary Format

### å…³é”®æŠ€æœ¯ï¼šIP_PKTINFO

è¿™æ˜¯ BeyondLink èƒ½æ­£ç¡®è¯†åˆ«å¤šè®¾å¤‡çš„æ ¸å¿ƒã€‚

```cpp
// å¯ç”¨ IP_PKTINFO
DWORD optval = 1;
setsockopt(socket, IPPROTO_IP, IP_PKTINFO, &optval, sizeof(optval));

// ä½¿ç”¨ WSARecvMsg è€Œé recvfrom
LPFN_WSARECVMSG WSARecvMsgFunc;
WSAIoctl(socket, SIO_GET_EXTENSION_FUNCTION_POINTER, ...);

// ä»æ§åˆ¶æ¶ˆæ¯æå–ç›®æ ‡åœ°å€
IN_PKTINFO* pktInfo = (IN_PKTINFO*)WSA_CMSG_DATA(cmsg);
unsigned char* destAddr = (unsigned char*)&pktInfo->ipi_addr.s_addr;

// æå–è®¾å¤‡ IDï¼ˆ239.255.X.Y â†’ Xï¼‰
int deviceID = destAddr[2];
```

**ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ**

æ™®é€šçš„ `recvfrom()` åªèƒ½è·å–å‘é€æ–¹ IPï¼Œæ— æ³•çŸ¥é“æ•°æ®åŒ…å‘é€åˆ°å“ªä¸ªå¤šæ’­åœ°å€ã€‚Beyond ç”¨ä¸åŒå¤šæ’­åœ°å€åŒºåˆ†è®¾å¤‡ï¼ˆ239.255.0.xã€239.255.1.x ç­‰ï¼‰ï¼Œåªæœ‰çŸ¥é“ç›®æ ‡åœ°å€æ‰èƒ½æ­£ç¡®åˆ¤æ–­è®¾å¤‡ IDã€‚

### æ•°æ®ç»“æ„

LaserPointï¼ˆ28 å­—èŠ‚ï¼‰ï¼š

```cpp
struct LaserPoint {
    float X;        // åç§» 0
    float Y;        // åç§» 4
    float R;        // åç§» 8
    float G;        // åç§» 12
    float B;        // åç§» 16
    float Z;        // åç§» 20ï¼ˆå…‰æŸæ ‡è®°ï¼‰
    float Focus;    // åç§» 24
};
```

### linetD2_x64.dll æ¥å£

```cpp
void Init(int maxDevices);                    // åˆå§‹åŒ–
void ReadLaserData(void* data, int length);   // è§£ææ•°æ®åŒ…
void* GetData(int device, int* pointCount);   // è·å–ç‚¹æ•°æ®
void Release();                               // é‡Šæ”¾èµ„æº
```

### æ¸²æŸ“ç®¡çº¿

1. é¡¶ç‚¹ç€è‰²å™¨ï¼šä¼ é€’ 2D åæ ‡
2. åƒç´ ç€è‰²å™¨ï¼šè¾“å‡º RGB é¢œè‰²
3. æ··åˆæ¨¡å¼ï¼šSrcBlend=ONE, DestBlend=ONEï¼ˆåŠ æ³•æ··åˆï¼‰
4. æ‹“æ‰‘ï¼šPOINTLIST
5. è¾“å‡ºï¼šR16G16B16A16_FLOATï¼ˆHDRï¼‰

### æ‰«æä»ªæ¨¡æ‹Ÿ

```
åŸå§‹ç‚¹
  â†“ ç‚¹æ’å€¼ï¼ˆN Ã— SampleCountï¼‰
  â†“ é€Ÿåº¦å¹³æ»‘ï¼ˆæƒ¯æ€§ï¼‰
  â†“ è¾¹ç¼˜æ·¡åŒ–ï¼ˆé€Ÿåº¦ä¾èµ–ï¼‰
  â†“ é™é‡‡æ ·ï¼ˆè´¨é‡çº§åˆ«ï¼‰
å¤„ç†åçš„ç‚¹
```

é€Ÿåº¦å¹³æ»‘å…¬å¼ï¼š
```
v(t+1) = v(t) + (v_target - v(t)) Ã— (1 - smoothing)
```

è¾¹ç¼˜æ·¡åŒ–ï¼šé«˜é€Ÿæ‰«æçš„çº¿è¾ƒæš—ï¼Œé™æ­¢å…‰æŸæœ€äº®ã€‚

### HDR æ¸²æŸ“

- çº¹ç†ï¼šR16G16B16A16_FLOATï¼ˆæ¯é€šé“ 16 ä½æµ®ç‚¹ï¼‰
- æ··åˆï¼šåŠ æ³•æ··åˆæ¨¡æ‹Ÿæ¿€å…‰å åŠ 
- åå¤„ç†ï¼š5Ã— äº®åº¦å¢å¼º + saturate

---

## CMake æ„å»º

BeyondLink ä½¿ç”¨ CMake 3.15+ï¼Œæ”¯æŒ Visual Studio 2022 å’Œå‘½ä»¤è¡Œç¼–è¯‘ã€‚

**ä¼˜åŠ¿ï¼š**
- è·¨ IDE æ”¯æŒï¼ˆVS 2022ã€VS Codeï¼‰
- è‡ªåŠ¨é“¾æ¥ DirectX å’Œ Winsock åº“
- è‡ªåŠ¨å¤åˆ¶ DLL åˆ°è¾“å‡ºç›®å½•
- é¢„è®¾ Debug/Release é…ç½®

**ç¼–è¯‘é€‰é¡¹ï¼š**

| é€‰é¡¹ | Debug | Release |
|------|-------|---------|
| ä¼˜åŒ– | /Od | /O2 |
| è°ƒè¯• | /Zi | /Zi |
| è¿è¡Œæ—¶æ£€æŸ¥ | /RTC1 | - |
| å†…è” | - | /Oi |
| é“¾æ¥ä¼˜åŒ– | - | /OPT:REF + /OPT:ICF |

**è¾“å‡ºç»“æ„ï¼š**

```
Build/
â”œâ”€â”€ Binaries/
â”‚   â”œâ”€â”€ Debug/
â”‚   â”‚   â”œâ”€â”€ BeyondLink.exe
â”‚   â”‚   â”œâ”€â”€ BeyondLink.pdb
â”‚   â”‚   â””â”€â”€ *.dll
â”‚   â””â”€â”€ Release/
â”‚       â””â”€â”€ ...
â””â”€â”€ CMake/
    â”œâ”€â”€ Debug/
    â””â”€â”€ Release/
```

---

## è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ã€‚

ç¬¬ä¸‰æ–¹åº“ï¼š
- linetD2_x64.dllï¼šç‰ˆæƒå½’ Beyond/Pangolin æ‰€æœ‰
- DirectX 11ï¼šç‰ˆæƒå½’ Microsoft æ‰€æœ‰

---

## è‡´è°¢

æ„Ÿè°¢ Pangolin Laser Systems æä¾›çš„ Beyond è½¯ä»¶å’Œåè®®ã€‚

æ„Ÿè°¢ Microsoft æä¾›çš„ DirectX å’Œ Windows Sockets APIã€‚

### æŠ€æœ¯å‚è€ƒ

- [Windows Sockets 2 - WSARecvMsg](https://docs.microsoft.com/en-us/windows/win32/api/winsock2/nf-winsock2-wsarecvmsg)
- [DirectX 11 Graphics](https://docs.microsoft.com/en-us/windows/win32/direct3d11/atoc-dx-graphics-direct3d-11)
- [RFC 1112 - IP Multicasting](https://tools.ietf.org/html/rfc1112)

### å¼€å‘å†ç¨‹

- **v1.0.0**ï¼šåŸºç¡€åŠŸèƒ½ï¼ˆUDP å¤šæ’­æ¥æ”¶ã€DirectX 11 æ¸²æŸ“ã€å•è®¾å¤‡æ”¯æŒï¼‰
- **v1.1.0**ï¼šæ‰«æä»ªæ¨¡æ‹Ÿï¼ˆç‚¹æ’å€¼ã€é€Ÿåº¦å¹³æ»‘ã€è¾¹ç¼˜æ·¡åŒ–ï¼‰
- **v1.2.0**ï¼šå¤šè®¾å¤‡æ”¯æŒï¼ˆIP_PKTINFOã€4 è®¾å¤‡åˆ‡æ¢ï¼‰
- **v1.3.0**ï¼šå®Œå–„æ³¨é‡Šå’Œæ–‡æ¡£ï¼ˆ1200+ è¡Œä¸­æ–‡æ³¨é‡Šï¼‰
- **v1.4.0**ï¼šè¿ç§»åˆ° CMake æ„å»ºç³»ç»Ÿï¼ˆè·¨ IDE æ”¯æŒï¼‰
- **v1.5.0**ï¼ˆå½“å‰ç‰ˆæœ¬ï¼‰ï¼šæ‰©å±•åˆ° 9 ä¸ªè®¾å¤‡ï¼Œä¼˜åŒ–ç”¨æˆ·ç•Œé¢ï¼ˆè®¾å¤‡ç¼–å· 1-9ï¼‰

---

## ç‰ˆæœ¬ä¿¡æ¯

**å½“å‰ç‰ˆæœ¬ï¼šv1.5.0**

- å‘å¸ƒæ—¥æœŸï¼š2025-10-27
- çŠ¶æ€ï¼šç¨³å®šç‰ˆ
- ä¸»è¦ç‰¹æ€§ï¼šæ”¯æŒ 9 ä¸ªæ¿€å…‰è®¾å¤‡ï¼Œè®¾å¤‡ç¼–å· 1-9ï¼Œå®Œæ•´çš„ CMake æ„å»ºç³»ç»Ÿ

### å‘å¸ƒè¯´æ˜

**v1.5.0 æ–°å¢åŠŸèƒ½ï¼š**
- âœ… æ”¯æŒ 9 ä¸ªæ¿€å…‰è®¾å¤‡ï¼ˆè®¾å¤‡ 1-9ï¼‰
- âœ… ç”¨æˆ·å‹å¥½çš„è®¾å¤‡ç¼–å·ï¼ˆä¸ Beyond Fixture number ä¸€è‡´ï¼‰
- âœ… ä¼˜åŒ–çš„é”®ç›˜æ§åˆ¶ï¼ˆæŒ‰ 1-9 é”®åˆ‡æ¢è®¾å¤‡ï¼‰
- âœ… ç‰ˆæœ¬ä¿¡æ¯æ˜¾ç¤ºï¼ˆçª—å£æ ‡é¢˜å’Œå¯åŠ¨ä¿¡æ¯ï¼‰

---

## è”ç³»æ–¹å¼

- GitHub Issues: [BeyondLink Issues](https://github.com/AspectEngine/BeyondLink/issues)
- Email: liuxiunan596@gmail.com

---

**BeyondLink v1.5.0** - Made for Laser Artists ğŸ¨âœ¨

[â¬† è¿”å›é¡¶éƒ¨](#beyondlink---beyond-æ¿€å…‰å®æ—¶å¯è§†åŒ–å·¥å…·)
